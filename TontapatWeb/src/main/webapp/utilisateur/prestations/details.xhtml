<ui:composition template="/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="title">
		Visualisation d'une prestation
	</ui:define>

	<ui:define name="content">

		<f:metadata>
			<f:viewParam name="id" value="#{mbPrestation.id}" />
			<c:set var="prestation"
				value="#{mbPrestation.showById(mbPrestation.id)}" scope="request" />
		</f:metadata>

		<div class="container">
			<h1>Prestation n°#{prestation.numReservation}</h1>
			Réalisée par #{prestation.offre.troupeau.utilisateur.prenom}
			<h3>Statut :</h3>
			<b:button styleClass="btn-primary" value="Voir la proposition" />
			<b:button styleClass="btn-primary" value="Faire une proposition" />
			<b:button styleClass="btn-primary" value="Evaluer" />
			<b:button styleClass="btn-danger" value="Annuler" />
			<b:button styleClass="btn-warning" value="Demander une intervention" />
			<b:button styleClass="btn-warning" value="Faire une réclamation" />

			<div class="offre-details-box">
				<div class="offre-details-info">
					<div class="offre-caracteristiques details-box">
						<h3>Récapitulatif de la prestation</h3>
						<b:iconAwesome value="fal fa-leaf" styleClass="icon" />Terrain : <strong>#{prestation.terrain.nom}</strong><br />
						<b:iconAwesome value="fal fa-calendar" styleClass="icon"></b:iconAwesome>
						Du
						<h:outputText value="#{prestation.dateDebut}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
						au
						<h:outputText value="#{prestation.dateFin}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
						<br />
						<h:graphicImage library="images" styleClass="icon"
							name="/icons/espece/#{prestation.offre.troupeau.race.espece.id}.png" />
						#{prestation.offre.troupeau.race.nom} (#{prestation.nombreBetes})<br />
						<h:graphicImage library="images" styleClass="icon"
							name="/icons/install.png" />
						Prise en charge de l'installation : #{prestation.typeInstallation
						== true ? "éleveur" : "client"} <br />
						<b:iconAwesome value="fal fa-user" size="lg" styleClass="icon"></b:iconAwesome>
						Intervention: tous les #{prestation.frequenceIntervention} jours <br />
<b:iconAwesome value="fa fa-times" size="lg" styleClass="icon" /> Conditions d'annulation : #{prestation.conditionAnnulation.nom.toLowerCase()}<br />
						<b:iconAwesome value="fal fa-globe" size="lg" styleClass="icon"></b:iconAwesome>
						Offre :
						<h:link outcome="/offres/details.xhtml?id=#{prestation.offre.id}"
							value="#{prestation.offre.nom}" />
					</div>
					<div class="offre-troupeau-infos details-box">
						<h3>Historique</h3>
						<b:iconAwesome value="fal fa-calendar" styleClass="icon" />
						Demande envoyée le
						<h:outputText value="#{prestation.dateReservation}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
						à partir de l'offre
						<h:link outcome="/offres/details.xhtml?id=#{prestation.offre.id}"
							value="#{prestation.offre.nom}" />
						de <strong>#{prestation.offre.troupeau.utilisateur.prenom}</strong><br />
						
						<b:iconAwesome value="fal fa-calendar" styleClass="icon" /><br />
					</div>
				</div>
				<div class="tarif-reservation">
					<div class="offre-details-tarif details-box">
						<h3>Tarification</h3>
						<div class="tarif-element">
							<div class="titre-tarif-elem">Frais d'installation</div>
							<div class="prix-element">#{prestation.fraisInstallation} €</div>
						</div>
						<div class="tarif-element">
							<div class="titre-tarif-elem">Frais d'intervention</div>
							<div class="prix-element">#{prestation.fraisIntervention} €</div>
						</div>
						<div class="tarif-element">
							<div class="titre-tarif-elem">Frais de bétail</div>
							<div class="prix-element">#{prestation.fraisBetail} €</div>
						</div>
						<div class="tarif-element">
							<div class="titre-tarif-elem">Frais de service (10%)</div>
							<div class="prix-element">#{prestation.fraisService} €</div>
						</div>
						<div class="tarif-element">
							<div class="titre-tarif-elem">TVA (20%)</div>
							<div class="prix-element">#{prestation.TVA} €</div>
						</div>

						<div class="tarif-element">
							<div class="titre-tarif-elem prix-total">
								<br />Prix total
							</div>
							<div class="prix-element prix-total">
								<br />#{prestation.prixTotal} €
							</div>
						</div>
					</div>
					<div class="btn-reservation">
						<div>
							<b:button onclick="$('.formReservation').modal('show')"
								value="Réserver" styleClass="btn-success" />
						</div>
						<div>
							<b:button onclick="" value="Contacter l'éleveur"
								styleClass="btn-contact" />
						</div>
					</div>
				</div>
			</div>
		</div>

	</ui:define>

</ui:composition>