<ui:composition template="/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

	<ui:define name="title">
		Visualisation d'une offre
	</ui:define>

	<ui:define name="content">
	
<f:metadata>
    <f:viewParam name="id" value="#{mbOffre.id}" />
</f:metadata>

		<div class="container">

			<ui:repeat value="#{mbOffre.ShowById(mbOffre.id)}" var="offre">

				<h1>
					#{offre.nom}
				</h1>
   		 Proposée par #{offre.troupeau.utilisateur.prenom} <br />
   		 #{offre.dateDebut} <br />
   		 #{offre.dateFin} <br />
   		 Tous les #{offre.frequenceIntervention} jours<br />
   		 Prise en charge de l'installation : #{offre.installationAssuree == true ? "éleveur" : "client"} <br />
   		 Couverture : #{offre.zoneCouverture}km autour de #{offre.troupeau.adresseVoie} <br />
   		 Conditions d'annulation : #{offre.conditionAnnulation.nom} <br />
   		 #{offre.description} <br />
   		 --------------------------- <br />
			</ui:repeat>
			
			
				<ui:repeat value="#{mbOffre.ShowById(mbOffre.id)}" var="offre">
				<b:button onclick="$('.formValidationModalClass').modal('show')"
			value="Réserver" />
		<b:modal title="Réservation d'une offre"
			styleClass="formValidationModalClass" closable="true"
			closeOnEscape="true">
			<div>
				<b:form horizontal="true">
					<b:formGroup>
						<div class="form-rows">
							<div>
								<div class="titre-ss-titre">
									<h4>
										<strong>Récapitulatif</strong>
									</h4>
									<h5>Nom de l'offre:#{offre.troupeau.nom}</h5>
									<h5>Prestataire:#{offre.troupeau.utilisateur.nom}#{offre.troupeau.utilisateur.prenom}</h5>
									<h5>Date de début:#{offre.dateDebut}</h5>
									<h5>Date de fin:#{offre.dateFin}</h5>
									<h5>Lieu de la prestation:#{offre.troupeau.adresseVoie}</h5>
									<h5>Conditions d'annulation:#{offre.conditionAnnulation.nom}</h5>
									<p></p>
									<h5>Frais d'installation:</h5>
									<h5>Frais d'intervention:</h5>
									<h5>Frais de bétail:</h5>
									<h5>Frais de service:</h5>
									<h5>TVA (20%):</h5>
									<h5>Prix total:</h5>
								</div>

							</div>
							<div>
								<div class="btn-toolbar">
									<b:buttonGroup>
										<b:commandButton update="@form" dismiss="modal"
											value="Précédent" look="warning" style="margin:40px"
											oncomplete="if(!validationFailed) { $('.formValidationModalClass').modal('hide') } " />
										<b:commandButton update="@form" dismiss="modal" style="margin:40px"
											value="Passer au paiement" look="primary"
											oncomplete="if(!validationFailed) { $('.formValidationModalClass').modal('hide') } " />
									</b:buttonGroup>
								</div>

							</div>
						</div>

					</b:formGroup>
				</b:form>
			</div>
		</b:modal>
		</ui:repeat>		
				
				

   		 --------------------------- <br />	
   		 <h:form>
   		 		<h:commandButton value="Réserver" action="#{mbPrestation.createPrestationOffer()}" />

		</h:form>
   		 
   		 
   		 
			</ui:repeat>

		</div>
	</ui:define>

</ui:composition>